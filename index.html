<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Readbook</title>
  <meta name="description" content="Readbook: lector TTS en el navegador con voces por personaje." />
  <link rel="stylesheet" href="app.css?v=1.4.4" />
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg class="rb-logo" viewBox="0 0 36 36" width="36" height="36" xmlns="http://www.w3.org/2000/svg">
          <rect x="0.5" y="0.5" width="35" height="35" rx="10" fill="#0f172a" stroke="#1f2a44"/>
          <circle cx="18" cy="18" r="14" fill="rgba(255,255,255,0.08)"/>
          <circle cx="18" cy="18" r="6" fill="#ffffff"/>
        </svg>
      </div>
      <div>
        <h1>Readbook</h1>
        <div class="tag">Guiones con voces por personaje ‚Äî 100% client-side.</div>
      </div>
    </div>
    <div class="row no-wrap">
      <button id="btnExport" class="ghost" title="Exportar tu texto a .txt">Exportar .txt</button>
      <button id="btnReset" class="danger" title="Limpiar todo">Limpiar</button>
      <button id="btnSelfCheck" class="ghost" title="Autocomprobaci√≥n r√°pida del DOM">üß™ Comprobar</button>
    </div>
  </header>

  <main>
    <div class="grid">
      <section class="card controls">
        <div class="head">
          <h2>Tu texto</h2>
          <span class="pill" id="wordCount">0 palabras</span>
        </div>
        <div class="body stack">
          <div class="editor-wrapper">
            <textarea id="inputText" placeholder="Pega aqu√≠ tu guion/libro. Sintaxis para personajes: 

1) L√≠nea: NOMBRE: di√°logo
2) Bloque: [[NOMBRE]] texto‚Ä¶ [[/NOMBRE]]

El resto se lee con la voz por defecto (Narrador)."></textarea>
          </div>
          <div class="row">
            <label class="drop" id="dropZone" style="flex:1">Suelta aqu√≠ tu archivo .txt/.md</label>
            <input type="file" id="fileInput" accept=".txt,.md,text/plain,text/markdown" />
          </div>

          <div class="toolbar">
            <div class="group">
              <button id="btnPlay" class="primary" title="Leer (Espacio)">‚ñ∂Ô∏è Leer <span class="kbd">Espacio</span></button>
              <button id="btnPause" title="Pausar (Espacio)">‚è∏Ô∏è Pausa <span class="kbd">Espacio</span></button>
              <button id="btnResume" title="Reanudar (R)">‚èØÔ∏è Reanudar <span class="kbd">R</span></button>
              <button id="btnStop" class="ghost" title="Parar (S)">‚èπÔ∏è Parar <span class="kbd">S</span></button>
            </div>
            <div class="group">
              <button id="btnRec" class="danger" title="Exportar audio (captura esta pesta√±a con audio)">‚è∫Ô∏è Exportar audio</button>
              <select id="recFormat" title="Formato de exportaci√≥n">
                <option value="wav">WAV</option>
                <option value="mp3">MP3 (beta)</option>
                <option value="webm">WEBM</option>
              </select>
              <button id="btnToggleView" class="ghost" title="Alternar Colores/Etiquetas">üé® Colores</button>
            </div>
            <div class="hint">Atajos: <b>Alt+1..9</b> etiqueta al vuelo. Panel derecho = asignaci√≥n r√°pida.</div>
          </div>

          <div class="quick-tags stack">
            <div class="row" style="align-items:flex-end">
              <div class="hint" style="flex:1">Arrastra una etiqueta al editor o apl√≠cala a la selecci√≥n.</div>
              <div class="row">
                <select id="applyTagSelect" title="Elige etiqueta para aplicar a la selecci√≥n"></select>
                <button id="applyTagBtn" class="ghost" title="Aplicar etiqueta a la selecci√≥n" disabled>üè∑Ô∏è Etiquetar selecci√≥n</button>
              </div>
            </div>
            <div id="tagBar" class="chips"></div>
          </div>

          <div class="status">
            <div>
              <div id="nowReading" class="hint">Listo para leer.</div>
              <div id="estimates" class="hint">‚Äì</div>
            </div>
            <progress id="progress" max="100" value="0" aria-label="Progreso de lectura"></progress>
          </div>
        </div>
      </section>

      <section class="card" id="rightPanel">
        <div class="head small">
          <h2 style="font-size:14px;margin:0">Asignaci√≥n r√°pida</h2>
          <span class="hint">Sel. / P√°rr / üîä / Alt+1..9</span>
        </div>
        <div class="body">
          <div id="quickCastList" class="quick-cast"></div>
        </div>
      </section>
    </div>

    <section class="card" style="margin-top:18px">
      <div class="head">
        <h2>Voz por defecto (Narrador)</h2>
        <span class="pill" id="langHint">‚Äì</span>
      </div>
      <div class="body stack">
        <div class="row" style="align-items:flex-end">
          <div style="flex:1">
            <label for="voiceSelect" class="hint">Voz</label>
            <select id="voiceSelect" style="width:100%"></select>
          </div>
          <button id="btnPreview" title="Prueba corta de la voz">üîä Prueba</button>
        </div>

        <div class="sliders">
          <div class="slider">
            <label>Velocidad <span id="rateVal">1.0</span></label>
            <input type="range" id="rate" min="0.5" max="1.8" step="0.1" value="1.0" />
          </div>
          <div class="slider">
            <label>Tono <span id="pitchVal">1.0</span></label>
            <input type="range" id="pitch" min="0.5" max="2" step="0.1" value="1.0" />
          </div>
          <div class="slider">
            <label>Volumen <span id="volumeVal">1.0</span></label>
            <input type="range" id="volume" min="0" max="1" step="0.05" value="1" />
          </div>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <div class="head">
        <h2>Personajes (voces por rol)</h2>
        <span class="pill" id="castCount">0 personajes</span>
      </div>
      <div class="body stack">
        <div class="row">
          <button id="btnAddChar" class="ghost">Ôºã A√±adir personaje</button>
          <button id="btnAutoDetect" title="Detecta nombres en el texto y los a√±ade a la lista">ü™Ñ Auto-detectar desde el texto</button>
        </div>
        <div id="castList" class="cast-list"></div>
        <div class="hint">Sintaxis soportada:
          <ul>
            <li><strong>L√≠nea</strong>: <code>ANA: ¬øC√≥mo est√°s?</code></li>
            <li><strong>Bloque</strong>: <code>[[LOCUTOR]] Bienvenido al programa‚Ä¶ [[/LOCUTOR]]</code></li>
          </ul>
          Todo lo que no tenga etiqueta se lee como <em>Narrador</em>.
        </div>
      </div>
    </section>
  </main>

  <footer class="foot">
    <div id="supportNote">Para exportar audio: selecciona <strong>Esta pesta√±a</strong> y marca <strong>Compartir audio</strong>.</div>
    <div class="row" style="justify-content:flex-end"><span id="domStatus" class="pill">Autotest: pendiente</span></div>
    <div id="live" aria-live="polite" class="hint" style="margin-top:6px"></div>
  </footer>

  <script src="app.js?v=1.4.4" defer></script>
</body>
</html>
